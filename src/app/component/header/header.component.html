<header>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <ng-container *ngIf="user$ | async as user; else loggedOut">
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarTogglerDemo03"
        aria-controls="navbarTogglerDemo03"
        aria-expanded="true"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div
        class="navbar-collapse collapse bg-dark px-2"
        id="navbarTogglerDemo03"
        style="width: 100%"
      >
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
          <li class="nav-item active">
            <a class="nav-link" routerLink="products">Products</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="cart"
              >Cart
              <div style="font-size: 10px" class="badge bg-danger">
                {{ itemsCount }}
              </div>
            </a>
          </li>
          <li class="nav-item">
            <div class="form-group" *ngIf="router.url === '/products'">
              <input
                type="text"
                class="form-control"
                placeholder="Search"
                style="width: 300px"
                [(ngModel)]="keyWord"
                (keyup)="search($event)"
              />
            </div>
          </li>
        </ul>
      </div>

      <div>
        <button
          mat-button
          [matMenuTriggerFor]="userMenu"
          style="color: white !important"
        >
          <mat-icon>account_circle</mat-icon>
          {{ user.name }}
          <mat-icon>expand_more</mat-icon>
        </button>
      </div>
    </ng-container>
    <ng-template #loggedOut>
      <div
        class="container"
        style="display: flex; justify-content: space-between"
      >
        <p><strong>Welcome to shoppingCart!</strong></p>
        <button mat-button (click)="login()" style="color: white !important">
          <mat-icon>login</mat-icon>
          Login
        </button>
      </div>
    </ng-template>
  </nav>

  <mat-menu #userMenu="matMenu">
    <button mat-menu-item (click)="logout()">Logout</button>
  </mat-menu>
</header>
