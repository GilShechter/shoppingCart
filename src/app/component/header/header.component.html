<header>
  <nav
    class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark"
    style="background-color: #353636 !important"
  >
    <ng-container *ngIf="user$ | async as user; else loggedOut">
      <button
        class="navbar-toggler collapsed"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div
        class="collapse navbar-collapse"
        id="navbarNav"
        style="margin-left: 10px"
      >
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" routerLink="products">Products</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="cart"
              >Cart
              <div style="font-size: 10px" class="badge bg-danger">
                {{ itemsCount }}
              </div>
            </a>
          </li>
        </ul>
      </div>
      <div class="form-group">
        <input
          type="text"
          class="form-control"
          placeholder="Search"
          style="width: 300px"
          [(ngModel)]="keyWord"
          (keyup)="search($event)"
        />
      </div>

      <button
        mat-button
        [matMenuTriggerFor]="userMenu"
        style="color: white !important; margin-right: 20px"
      >
        <mat-icon>account_circle</mat-icon>
        {{ user.name }}
        <mat-icon>expand_more</mat-icon>
      </button>
    </ng-container>
    <ng-template #loggedOut>
      <div
        class="container"
        style="display: flex; justify-content: space-between"
      >
        <p><strong>Welcome to shoppingCart!</strong></p>
        <button mat-button (click)="login()" style="color: white !important">
          <mat-icon>login</mat-icon>
          Login
        </button>
      </div>
    </ng-template>
  </nav>

  <mat-menu #userMenu="matMenu">
    <button mat-menu-item (click)="logout()">Logout</button>
  </mat-menu>
</header>
